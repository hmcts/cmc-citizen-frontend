{% from "timeRemaining.njk" import timeRemaining %}

{% macro _viewResponseLink (externalId) %}
  <a href="{{ ResponsePaths.summaryPage.evaluateUri({ externalId: externalId }) }}">{{ t('View full response') }}</a>
{% endmacro %}

{% macro caseStatusForDefendant(status, claim, url, isAfter4pm) %}
  {% if status === ClaimStatus.OFFER_SETTLEMENT_REACHED %}
    {{ t('You’ve both signed a legal agreement. The claim is now settled.') }}
  {% elseif status === ClaimStatus.ELIGIBLE_FOR_CCJ %}
    {{ t('You did not respond by the deadline. {{ claimantName }} can request a County Court Judgment (CCJ) against you. '
    + 'You can still respond until they do.',
    { claimantName: claim.claimData.claimant.name } ) }}
  {% elseif status === ClaimStatus.CCJ_REQUESTED %}
    {{ t('The claimant has requested a County Court Judgement (CCJ) against you on {{ ccjRequestedAt }}.',
    { ccjRequestedAt: claim.countyCourtJudgmentRequestedAt | date }) }}
  {% elseif status === ClaimStatus.CLAIM_REJECTED %}
    {% if claim.response.freeMediation === FreeMediationOption.YES %}
      {{ t('You’ve rejected the claim and suggested mediation on {{ respondedAt }}.',
      { respondedAt: claim.respondedAt | date }) }}
    {% else %}
      {{ t('You’ve rejected the claim.' ) }}
    {% endif %}
  {% elseif status === ClaimStatus.OFFER_ACCEPTED %}
    {{ t('The claimant has accepted your offer. You need to sign a legal agreement to settle out of court.',
    { claimantName: claim.claimData.claimant.name } ) }}
  {% elseif status === ClaimStatus.OFFER_REJECTED %}
    {{ t('{{ claimantName }} has rejected your offer.', { claimantName: claim.claimData.claimant.name }) | safe }}
  {% elseif status === ClaimStatus.OFFER_SUBMITTED %}
    {{ t('You made an offer to settle out of court.') }}
  {% elseif status === ClaimStatus.MORE_TIME_REQUESTED %}
    {{ t('You need to respond by {{ responseDeadline }}.',
    { responseDeadline: claim.responseDeadline | date }) }}
  {% elseif status === ClaimStatus.NO_RESPONSE %}
    <a href="{{ url }}">{{ t('Respond to claim') }}</a>
    <span class="block mobile-inline">
      {{ timeRemaining(claim.remainingDays, isAfter4pm) }}
    </span>
  {% endif %}
{% endmacro %}

{% macro caseStatusForClaimant(status, claim, url) %}
  {% if status === ClaimStatus.CCJ_REQUESTED %}
    {{ t('You requested a County Court Judgment on {{ ccjRequestedAt }}.',
    { ccjRequestedAt: claim.countyCourtJudgmentRequestedAt | date }) }}
  {% elseif status === ClaimStatus.ELIGIBLE_FOR_CCJ %}
    <p>{{ t('The defendant has not responded to your claim. You can request a County Court Judgment against them.') }}</p>
  {% elseif status === ClaimStatus.OFFER_SETTLEMENT_REACHED %}
    {{ t('You’ve both signed a legal agreement. The claim is now settled.') }}
  {% elseif status === ClaimStatus.CLAIM_REJECTED %}
    {% if claim.response.freeMediation === FreeMediationOption.YES %}

      "Mary Richards has rejected the claim. But they’ve suggested a mediation session to help resolve this dispute."

      {#todo Ask for content check. You shouldn't start a sentence with "But".#}
      {{ t('{{ defendantName }} has rejected the claim. '
      + 'They’ve suggested free mediation on {{ respondedAt }}. You can accept or reject',
      { defendantName: claim.response.defendant.name, respondedAt: claim.respondedAt | date }) }}
    {% else %}
      {{ t('{{ defendantName }} has rejected your claim.',
      { defendantName:  claim.claimData.defendant.name }) }}
    {% endif %}
  {% elseif status === ClaimStatus.OFFER_ACCEPTED %}
    {{ t('You’ve signed the agreement. We’ve asked {{ defendantName }} to sign the agreement.',
    { defendantName: claim.claimData.defendant.name }) }}
  {% elseif status === ClaimStatus.OFFER_REJECTED %}
    {{ t('You’ve rejected an offer to settle out of court.') }}

    <p>
      {{ t('{{ defendantName }} has rejected your claim.',
      { defendantName:  claim.claimData.defendant.name }) }}
    </p>
  {% elseif status === ClaimStatus.OFFER_SUBMITTED %}
    <p>
      {{ t('The defendant has made an offer to settle out of court.') }}
    </p>
    {{ t('{{ defendantName }} has rejected your claim.',
    { defendantName:  claim.claimData.defendant.name }) }}
  {% elseif status === ClaimStatus.MORE_TIME_REQUESTED %}
    {{ t('{{ defendantName }} has requested more time to respond.',
    { defendantName: claim.claimData.defendant.name }) }}
  {% elseif status === ClaimStatus.NO_RESPONSE %}
    {{ t('Your claim has been sent.') }}
  {% endif %}
{% endmacro %}
