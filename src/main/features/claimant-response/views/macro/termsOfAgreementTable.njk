{% macro termsOfAgreement(id, response, courtOfferedPaymentIntention, totalAmount) %}
  <fieldset id="{{ id }}" class="form-group">
    <legend>
      <span class="visually-hidden">{{ t( 'Payment plan' ) }}</span>
    </legend>

    {{ courtOfferedPaymentIntention.paymentOption }}
    {% if courtOfferedPaymentIntention.paymentOption === PaymentType.BY_SPECIFIED_DATE.value %}
      {% set amountToPay = 'the full amount' %}
      {% if response.responseType == ResponseType.PART_ADMISSION.value %}
        {% set amountToPay = totalAmount | numeral %}
      {% endif %}
      {{ row('The offer', t('{{ defendantFullName }} will pay ' + amountToPay + ', no later than {{ paymentDate }}',
        { defendantFullName: response.defendant.name, paymentDate: courtOfferedPaymentIntention.paymentDate | date }
      )) }}
      {{ row('Completion date', courtOfferedPaymentIntention.paymentDate | date) }}
    {% elseif courtOfferedPaymentIntention.paymentOption === PaymentType.INSTALMENTS.value %}
      {{ row('The offer', t('{{ defendantFullName }} will pay instalments of {{ instalmentAmount }} {{ paymentSchedule }}. The first instalment will be paid by {{ firstPaymentDate }}.',
        { defendantFullName: response.defendant.name,
          instalmentAmount: courtOfferedPaymentIntention.repaymentPlan.instalmentAmount | numeral,
          paymentSchedule: courtOfferedPaymentIntention.repaymentPlan.paymentSchedule | renderPaymentSchedule,
          firstPaymentDate: courtOfferedPaymentIntention.repaymentPlan.firstPaymentDate | date
        }
      )) }}
      {{ row('Completion date', courtOfferedPaymentIntention.repaymentPlan.completionDate | date) }}
    {% endif %}

  </fieldset>
{% endmacro %}

{% macro row(label, value) %}
  <div class="bottom-border">
    <div class="column-one-third  {% if not label %}if-empty{% endif %}">
      <span> {{ t( label ) }}</span>
    </div>
    <div class="column-two-thirds {% if not value %}if-empty{% endif %}">
      <span>{{ value }}</span>
    </div>
  </div>
{% endmacro %}
