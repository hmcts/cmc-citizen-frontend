{% macro termsOfAgreement(id, claimantName, defendantName, paymentIntention, lastPaymentDate) %}
  <fieldset id="{{ id }}" class="form-group">
    <legend>
      <span class="visually-hidden">{{ t( 'Payment plan' ) }}</span>
    </legend>

    {% if paymentIntention.paymentOption === domain.PaymentOption.IMMEDIATELY %}
      {{ row('The offer', t('{{ defendantFullName }} will pay the full amount immediately. {{ claimantFullName }} will receive the money no later than {{ paymentDate }}. Any cheques or transfers will be clear in their account by this date.',
        { claimantFullName: claimantName, defendantFullName: defendantName, paymentDate: paymentIntention.paymentDate | date }
      )) }}
      {{ row('Completion date', paymentIntention.paymentDate | date) }}
    {% elseif paymentIntention.paymentOption === domain.PaymentOption.BY_SPECIFIED_DATE %}
      {{ row('The offer', t('{{ defendantFullName }} will pay the full amount, no later than {{ paymentDate }}.',
        { defendantFullName: defendantName, paymentDate: paymentIntention.paymentDate | date }
      )) }}
      {{ row('Completion date', paymentIntention.paymentDate | date) }}
    {% elseif paymentIntention.paymentOption === domain.PaymentOption.INSTALMENTS %}
      {{ row('The offer', t('{{ defendantFullName }} will pay instalments of {{ instalmentAmount }} {{ paymentSchedule }}. The first instalment will be paid by {{ firstPaymentDate }}.',
        { defendantFullName: defendantName,
          instalmentAmount: paymentIntention.repaymentPlan.instalmentAmount | numeral,
          paymentSchedule: paymentIntention.repaymentPlan.paymentSchedule | renderPaymentSchedule,
          firstPaymentDate: paymentIntention.repaymentPlan.firstPaymentDate | date
        }
      )) }}
      {{ row('Completion date', lastPaymentDate | date) }}
    {% endif %}
  </fieldset>
{% endmacro %}

{% macro row(label, value) %}
  <div class="bottom-border">
    <div class="column-one-third  {% if not label %}if-empty{% endif %}">
      <span> {{ t( label ) }}</span>
    </div>
    <div class="column-two-thirds {% if not value %}if-empty{% endif %}">
      <span>{{ value }}</span>
    </div>
  </div>
{% endmacro %}
