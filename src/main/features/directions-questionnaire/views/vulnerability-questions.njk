{% extends "layout.njk" %}
{% from "form.njk" import csrfProtection, radioOption, textArea, saveAndContinueButton %}

{% set heading = 'Vulnerability Questions' %}

{% block content %}

<div class="grid-row">
  <div class="column-two-thirds">
    <form method="post" class="analytics-submit-event-trigger" data-event-action="DQ: Vulnerability Questions" data-event-label-from="vulnerabilityQuestions" novalidate>
      {{ csrfProtection(csrf) }}

      {% set error = form.errorFor('vulnerabilityQuestions') %}
      <fieldset id="vulnerabilityQuestions[label]" class="form-group {% if error %} form-group-error {% endif %}">
        <legend class="visually-hidden">{{ t(heading) }}</legend>

        <p>{{ t('Question 1: Do you believe you, or a witness who will give evidence on your behalf, are vulnerable in anyway which the Court needs to consider?') }}</p>
        {% if error %}<span class="error-message">{{ t(error) }}</span>{% endif %}

        {{ radioOption(label = 'Yes', name = 'vulnerabilityQuestions', value = YesNoOption.YES.option, checked = form.valueFor('vulnerabilityQuestions').option === YesNoOption.YES.option) }}

        <div class="form-group panel panel-border-narrow js-hidden" id="vulnerabilityQuestions-yes" aria-hidden="false">
          {{ textArea(label = 'Question 2: If you have answered “yes” to question 1, in what way/s are you/ the witness vulnerable and what steps, support or adjustments do you wish the Court to consider?', name = 'vulnerabilityDetails', form = form) }}
        </div>

        {{ radioOption(label = 'No', name = 'vulnerabilityQuestions', value = YesNoOption.NO.option, checked = form.valueFor('vulnerabilityQuestions').option === YesNoOption.NO.option) }}

      </fieldset>
        <div class="form-group">
                  <p>{{ t('Your answers to the questions above will enable the court and the judge, to consider what steps, adjustments or support can be arranged') }}</p>
                  <p>{{ t('You are reminded that a copy of this directions questionnaire will be shared with all other parties') }}</p>
         </div>
        {{ saveAndContinueButton() }}
    </form>
  </div>
</div>
{% endblock %}

