{% extends "layout.njk" %}

{% from "table.njk" import tableStart,tableEnd, row, rowWithMultipleValue %}
{% from "form.njk" import csrfProtection, submitButton, errorSummary, checkboxGroup, textInput %}
{% from "statement-of-truth.njk" import statementOfTruth %}
{% from "party/details.njk" import partyDetailsSummaryFragment %}

{% set title = t("Money claim") %}
{% set heading = t("Check your answers before submitting your claim") %}

{% block content %}
  <form novalidate method="post">
    {{ csrfProtection(csrf) }}

    {{ tableStart("yourDetails", "Your details") }}
    {{
      partyDetailsSummaryFragment(
        partyDetails = draftClaim.claimant.partyDetails
      )
    }}
    {{ row("Phone:", draftClaim.claimant.mobilePhone.number) }}
    {{ tableEnd() }}

    {{ tableStart("theirDetails", "Their details") }}
    {{
      partyDetailsSummaryFragment(
        partyDetails = draftClaim.defendant.partyDetails,
        showCorrespondenceAddressSection = false
      )
    }}
    {{ row("Email:", draftClaim.defendant.email.address) }}
    {{ tableEnd() }}

    {{ tableStart("claimAmount", "Claim amount") }}
    {{ row("Claim amount:", claimAmountTotal.claimAmount | numeral) }}

    {% if (interestClaimed === true) %}
      {% if (draftClaim.interest.rate) %}
        {{ row("Interest rate:", draftClaim.interest.rate | numeral("0,0.00") + "\% \(" + draftClaim.interest.type + "\)" ) }}
      {% endif %}
      {% if payAtSubmission === false %}
        {{ row("Date interest is claimed from:", draftClaim.interestDate.date.asString() | date ) }}
      {% else %}
        {{ row("Date interest is claimed from:", t( 'Date you submit the claim' )) }}
      {% endif %}
      {% if (claimAmountTotal.interestAmount) %}
        {{ row("Interest:", claimAmountTotal.interestAmount | numeral) }}
      {% endif %}
    {% else %}
      {{ row("Interest rate:", t('I don’t want to claim interest')) }}
    {% endif %}

    {{ row("Claim fee:", claimAmountTotal.feeAmount | numeral) }}
    {{ row('Total amount you’re claiming:',  claimAmountTotal.totalAmount | numeral) }}
    {{ tableEnd() }}

    {{ tableStart("claimDetails", "Claim details") }}
    {{ row('Why you’re owed the money:', draftClaim.reason.reason ) }}
    {{ tableEnd() }}

    <div class="form-group">
    {% if (partyAsCompanyOrOrganisation === true) %}
        
        <details>
            <summary>
              <span class="summary">{{ t('Types of senior position') }}</span>
            </summary>

            <div class="panel panel-border-narrow">
              <p>{{ t('A senior position could be a:') }}</p>
              <ul class="list-bullet list">
                <li>{{ t('director') }}</li>
                <li>{{ t('treasurer') }} </li>
                <li>{{ t('chief executive') }} </li>
                <li>{{ t('manager or other officer of the company or corporation') }}</li>
              </ul>
            <p>{{ t("If your company isn't registered, a senior position could also be the:") }}</p>
            <ul class="list-bullet list">
              <li>{{ t('mayor') }}</li>
              <li>{{ t('chairman') }}</li>
              <li>{{ t('president') }}</li>
              <li>{{ t('town clerk or other similar officer of the corporation.') }}</li>
            </ul>
          </div>
        </details> 
        {{ textInput(t('Full name'), 'signerName', form, autocomplete='signerName') }}
        {{ textInput(t('Role'), 'signerRole', form, autocomplete='signerRole') }}
      {% endif %}
      {{ statementOfTruth(form, label = 'The claimant believes that the facts stated in this claim are true') }}

      {% set submitButtonLabel = t('Submit and continue to payment ') %}
      {{ submitButton(submitButtonLabel + '(' + (claimAmountTotal.feeAmount | numeral) + ')') }}
    </div>
  </form>
{% endblock %}
