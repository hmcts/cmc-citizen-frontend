{% from "externalLink.njk" import externalLink %}

{% macro _webChatWidget(label = 'Web chat') %}
    {% if featureToggles.webChat %}
        <h2 class="heading-medium contact-us">{{ t(label)}}</h2>
        <div id="ctsc-web-chat" class="web-chat"></div>
    {% endif %}
{% endmacro%}

{% macro _antennawebChatWidget(label = 'Web chat') %}
   {% if antennawebChat %}
      <h2 class="heading-medium contact-us">{{ t(label)}}</h2>
      <button class="webChat">Talk to an Agent</button>
      <p>
      <p id="metrics"></p>
        <web-chat class="hidden"
            chat-title="Money Claims Web Chat"
            url="webchat.ctsc.hmcts.net"
            chat-icon-url="/img/lib/gov.uk_logotype_crown_invert_trans.png?0.26.0"
            locale-url="/assets/locale"
            api-version="1.0"
            Language="English"
            Service="OCMC"
            User="Chat"
            page-name="Money Claims"
            route-point-identifier="Default" work-flow-type lease-time="24" priority="5" secure-connections="true" metrics-polling-interval="15">
        </web-chat>
      </p>
    {% endif %}
{% endmacro%}

{% macro _emailWidget(email = supportEmailAddress) %}
    <h2 class="heading-medium contact-mail">{{ t('Email') }}</h2>
    <p><a href="mailto:{{t(email)}}">{{ t(email)}}</a>
    </p>
{% endmacro%}

{% macro _phoneWidget(phoneNumber = '0300 123 7050') %}
    <h2 class="heading-medium contact-us">{{ t('Telephone') }}</h2>
    <p>{{ t(phoneNumber) }}
      <span class="block">{{ t("Monday to Friday, 8.30am to 5pm.") }}</span>
      <span class="block">{{ _callCharges()}}</span>
    </p>
{% endmacro %}

{% macro _holidayWidget() %}
  {% if (toDate() < toDate("2022-09-20") and toDate() >= toDate("2022-09-13")) %}
    <h2 class="heading-medium contact-us"> {{ t('Additional Bank Holiday Opening Times')}}</h2>
    <p>{{ t("14 Sep - 8.30am - 5.00pm (Normal Times)")}}</p>
    <p>{{ t("15 Sep - 8.30am - 5.00pm (Normal Times)")}}</p>
    <p>{{ t("16 Sep - 8.30am - 5.00pm (Normal Times)")}}</p>
    <p>{{ t("17 Sep - Closed")}}</p>
    <p>{{ t("18 Sep - Closed")}}</p>
    <p>{{ t("19 Sep - Closed")}}</p>
    <p>{{ t("20 Sep - 8.30am - 5.00pm (Normal Times)")}}</p>
  {% endif %}
{% endmacro %}

{% macro _christmasHolidaysWidget() %}
  {% if (toDate() < toDate("2023-01-03") and toDate() >= toDate("2022-12-22")) %}
    <h2 class="heading-medium contact-us"> {{ t('Christmas and New Year opening times')}}</h2>
    <p>{{ t("23 Dec - 8.30am - 5.00pm (Normal Times)")}}</p>
    <p>{{ t("24 Dec - Closed")}}</p>
    <p>{{ t("25 Dec - Closed")}}</p>
    <p>{{ t("26 Dec - Closed")}}</p>
    <p>{{ t("27 Dec - Closed")}}</p>
    <p>{{ t("28 Dec - Closed")}}</p>
    <p>{{ t("29 Dec - 8.30am - 5.00pm (Normal Times)")}}</p>
    <p>{{ t("30 Dec - 8.30am - 5.00pm (Normal Times)")}}</p>
    <p>{{ t("31 Dec - Closed")}}</p>
    <p>{{ t("1 Jan - Closed")}}</p>
    <p>{{ t("2 Jan - Closed")}}</p>
    <p>{{ t("3 Jan - 8.30am - 5.00pm (Normal Times)")}}</p>
  {% endif %}
{% endmacro %}

{% macro supportWidget(label = 'Help and support') %}
    <h2 class="heading-medium">{{ t(label) }}</h2>
    {{ _webChatWidget() }}
    {{ _antennawebChatWidget() }}
    {{ _emailWidget() }}
    {{ _phoneWidget() }}
    {{ _holidayWidget() }}
{% endmacro %}

{% macro supportWidget(label = 'Email') %}
    {{ _emailWidget('contactocmc@justice.gov.uk') }}
    {{ _phoneWidget('0300 123 7050') }}
{% endmacro %}

{% macro supportWidgetaccessibility(label = 'Email') %}
    {{ _emailWidget('contactocmc@justice.gov.uk') }}
    {{ _phoneWidget('0300 123 7050') }}
{% endmacro %}

{% macro supportWidgetContactus(label = 'Email') %}
    {{ _antennawebChatWidget() }}
    {{ _emailWidget('contactocmc@justice.gov.uk') }}
    {{ _phoneWidget('0300 123 7050') }}
    {{ _holidayWidget() }}
    {{ _christmasHolidaysWidget() }}
{% endmacro %}

{% macro mcolSupportWidget(label = 'Help and advice') %}
  <h2 class="heading-medium">{{ t(label) }}</h2>
  {{ _webChatWidget() }}
  {{ _antennawebChatWidget() }}
  {{ _emailWidget('ccbc@hmcts.gsi.gov.uk') }}
  {{ _phoneWidget('0300 123 1057') }}
  {{ _holidayWidget() }}
{% endmacro %}

{% macro _callCharges() %}
    {{ externalLink(t('Find out about call charges'), 'https://www.gov.uk/call-charges') }}
{% endmacro %}

{% macro citizensAdviceWidget() %}
<p>
  {{ t('You might be able to get advice about the claim from') }}
  {{ externalLink(t('Citizens Advice'), 'https://www.citizensadvice.org.uk/about-us/contact-us/') }}.
</p>
{% endmacro %}


{% macro contactUsForHelp() %}
<details class="contact-us-for-help">

  <summary><span class="summary">{{ t('Contact us for help') }}</span></summary>
  <div class="panel">
    {{ _webChatWidget() }}
    {{ _antennawebChatWidget() }}
    {{ _emailWidget() }}
    {{ _phoneWidget() }}
    {{ _holidayWidget() }}
  </div>
</details>
{% endmacro %}
